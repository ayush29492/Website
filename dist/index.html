<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Records</title>
	<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="header-image">
</div>
<div>
	<dive>
	    <h1 class="header-text">
	        Statistics
	    </h1>
	</div>
	<dive>
		<h1>Notion API Data</h1>
	    <h1>Data from Server</h1>
        <pre id="filtered-data"></pre>
       
    </div>
	</div>
	<script>
        function filterData(data) {
            return data.results.filter(item => {
                const type = item.properties.Type.multi_select;
                return type && type.some(select => select.name === 'research');  // Change condition as needed
            });
        }

        // Function to display filtered data in the HTML
        function displayData(filteredData) {
            const listElement = document.getElementById('filtered-data');
            listElement.innerHTML = '';  // Clear the previous content
            
            filteredData.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = `${item.properties.Name.title[0].text.content} - ${item.properties.Type.multi_select.map(type => type.name).join(', ')}`;
                listElement.appendChild(listItem);
            });
        }
        // Fetch the data from the server
        fetch('/.netlify/functions/notionapi')
          .then(response => response.json())
          .then(data => {
            
            const filteredData = filterData(data);
            displayData(filteredData);
          })
          .catch(error => console.error('Error fetching data:', error));
      </script>

</body>

</html>